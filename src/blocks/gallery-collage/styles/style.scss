.wp-block-coblocks-gallery-collage {

	&.alignfull {

		ul {
			padding-left: 1em;
			padding-right: 1em;
		}
	}

	&:not(.is-style-layered) li {
		margin: 0;
	}

	ul {
		display: flex;
		flex-wrap: wrap;
		list-style-type: none;
		margin: 0;
		padding: 0;
	}

	&.has-no-gutter &__item {
		padding: 0 !important;
	}

	&__item {

		figure,
		.block-editor-media-placeholder {
			padding: 0;
		}

		&:nth-child(1) {
			align-self: flex-end;
			width: 75%;

			figure,
			.block-editor-media-placeholder {
				padding-top: calc(330 / 495 * 100%);
			}
		}

		&:nth-child(2) {
			align-self: flex-end;
			margin-right: auto !important;
			width: 25%;

			figure,
			.block-editor-media-placeholder {
				padding-top: 100%;
			}
		}

		&:nth-child(3) {
			align-self: flex-start;
			margin-left: auto !important;
			width: 25%;

			figure,
			.block-editor-media-placeholder {
				padding-top: 100%;
			}
		}

		&:nth-child(4) {
			align-self: flex-start;
			width: 25%;

			figure,
			.block-editor-media-placeholder {
				padding-top: 100%;
			}
		}

		&:nth-child(5) {
			align-self: flex-start;
			width: 25%;

			figure,
			.block-editor-media-placeholder {
				padding-top: 150%;
			}
		}
	}

	.is-style-tiled &__item {

		&:nth-child(1),
		&:nth-child(4) {
			width: 66.66%;

			figure,
			.block-editor-media-placeholder {
				padding-top: 66%;
			}
		}

		&:nth-child(2),
		&:nth-child(3) {
			width: 33.33%;

			figure,
			.block-editor-media-placeholder {
				padding-top: 100%;
			}
		}
	}

	.is-style-layered &__item {
		align-self: flex-start;

		&:nth-child(1) {
			margin-left: calc(150 / 890 * 100%) !important;
			width: calc(358 / 890 * 100%);
			z-index: 4;

			figure,
			.block-editor-media-placeholder {
				padding-top: calc(492 / 358 * 100%);
			}
		}

		&:nth-child(2) {
			margin-left: calc(175 / 850 * 100%) !important;
			margin-top: calc(117 / 990 * 100%) !important;
			width: calc(198 / 890 * 100%);
			z-index: 2;

			figure,
			.block-editor-media-placeholder {
				padding-top: 100%;
			}
		}

		&:nth-child(3) {
			margin-left: calc(328 / 890 * 100%) !important;
			margin-top: calc(249 / 890 * 100% * -1) !important;
			width: calc(492 / 890 * 100%);
			z-index: 3;

			figure,
			.block-editor-media-placeholder {
				padding-top: calc(340 / 492 * 100%);
			}
		}

		&:nth-child(4) {
			margin-top: calc(189 / 890 * 100% * -1) !important;
			width: calc(492 / 890 * 100%);
			z-index: 1;

			figure,
			.block-editor-media-placeholder {
				padding-top: calc(378 / 492 * 100%);
			}
		}
	}

	&__figure {
		display: flex;
		margin: 0;
		position: relative;
		width: 100%;

		img {
			height: 100%;
			object-fit: cover;
			position: absolute;
			top: 0;
			vertical-align: middle;
			width: 100%;
		}
	}

	figcaption {
		bottom: 0;
		font-size: 13px;
		opacity: 0.9;
		padding: 30px 10px 10px;
		position: absolute;
		text-align: center;
		width: 100%;
	}

	&.has-caption-style-dark figcaption {
		background: linear-gradient(0deg, rgba($color: $black, $alpha: 0.7) 0, rgba($color: $black, $alpha: 0.3) 50%, transparent);
	}

	&.has-caption-style-light figcaption {
		background: linear-gradient(0deg, rgba($color: $white, $alpha: 0.93) 6.3%, rgba($color: $white, $alpha: 0.5) 61%, rgba(255, 255, 255, 0));
	}

	&:not(.has-caption-color).has-caption-style-dark figcaption {
		color: $white;
	}

	&:not(.has-caption-color).has-caption-style-light figcaption {
		color: $black;
	}
}

.wp-block-coblocks-gallery-collage:not([class*="is-style"]) {

	.wp-block-coblocks-gallery-collage__item:nth-child(1),
	.wp-block-coblocks-gallery-collage__item:nth-child(2) {
		padding-bottom: calc(#{map-get($spacing, 1)} * 2);
	}

	&.has-medium-gutter .wp-block-coblocks-gallery-collage__item:nth-child(1),
	&.has-medium-gutter .wp-block-coblocks-gallery-collage__item:nth-child(2) {

		@include break-small() {
			padding-bottom: calc(#{map-get($spacing, 2)} * 2);
		}
	}

	&.has-large-gutter .wp-block-coblocks-gallery-collage__item:nth-child(1),
	&.has-large-gutter .wp-block-coblocks-gallery-collage__item:nth-child(2) {

		@include break-small() {
			padding-bottom: calc(#{map-get($spacing, 3)} * 2);
		}
	}

	&.has-huge-gutter .wp-block-coblocks-gallery-collage__item:nth-child(1),
	&.has-huge-gutter .wp-block-coblocks-gallery-collage__item:nth-child(2) {

		@include break-small() {
			padding-bottom: calc(#{map-get($spacing, 4)} * 2);
		}
	}

	ul > *:not(:first-child) {
		padding-left: calc(#{map-get($spacing, 1)} * 2);
	}

	&.has-medium-gutter ul > *:not(:first-child) {

		@include break-small() {
			padding-left: calc(#{map-get($spacing, 2)} * 2);
		}
	}

	&.has-large-gutter ul > *:not(:first-child) {

		@include break-small() {
			padding-left: calc(#{map-get($spacing, 3)} * 2);
		}
	}

	&.has-huge-gutter ul > *:not(:first-child) {

		@include break-small() {
			padding-left: calc(#{map-get($spacing, 4)} * 2);
		}
	}
}

.is-style-tiled {

	.wp-block-coblocks-gallery-collage__item:nth-child(2) {
		padding-left: calc(#{map-get($spacing, 1)} * 2);
	}

	&.has-medium-gutter .wp-block-coblocks-gallery-collage__item:nth-child(2) {

		@include break-small() {
			padding-left: calc(#{map-get($spacing, 2)} * 2);
		}
	}

	&.has-large-gutter .wp-block-coblocks-gallery-collage__item:nth-child(2) {

		@include break-small() {
			padding-left: calc(#{map-get($spacing, 3)} * 2);
		}
	}

	&.has-huge-gutter .wp-block-coblocks-gallery-collage__item:nth-child(2) {

		@include break-small() {
			padding-left: calc(#{map-get($spacing, 4)} * 2);
		}
	}

	.wp-block-coblocks-gallery-collage__item:nth-child(3) {
		padding-right: calc(#{map-get($spacing, 1)} * 2);
		padding-top: calc(#{map-get($spacing, 1)} * 2);
	}

	&.has-medium-gutter .wp-block-coblocks-gallery-collage__item:nth-child(3) {

		@include break-small() {
			padding-right: calc(#{map-get($spacing, 2)} * 2);
			padding-top: calc(#{map-get($spacing, 2)} * 2);
		}
	}

	&.has-large-gutter .wp-block-coblocks-gallery-collage__item:nth-child(3) {

		@include break-small() {
			padding-right: calc(#{map-get($spacing, 3)} * 2);
			padding-top: calc(#{map-get($spacing, 3)} * 2);
		}
	}

	&.has-huge-gutter .wp-block-coblocks-gallery-collage__item:nth-child(3) {

		@include break-small() {
			padding-right: calc(#{map-get($spacing, 4)} * 2);
			padding-top: calc(#{map-get($spacing, 4)} * 2);
		}
	}

	.wp-block-coblocks-gallery-collage__item:nth-child(4) {
		padding-top: calc(#{map-get($spacing, 1)} * 2);
	}

	&.has-medium-gutter .wp-block-coblocks-gallery-collage__item:nth-child(4) {

		@include break-small() {
			padding-top: calc(#{map-get($spacing, 2)} * 2);
		}
	}

	&.has-large-gutter .wp-block-coblocks-gallery-collage__item:nth-child(4) {

		@include break-small() {
			padding-top: calc(#{map-get($spacing, 3)} * 2);
		}
	}

	&.has-huge-gutter .wp-block-coblocks-gallery-collage__item:nth-child(4) {

		@include break-small() {
			padding-top: calc(#{map-get($spacing, 4)} * 2);
		}
	}
}

// Import legacy styles for older versions of CoBlocks
@import "legacy";
